{% extends 'main/base.html' %}
{% load static %}

{% block title %}Home - College Website{% endblock %}

{% block content %}
<!-- Hero Section with Banner Slider -->
<section class="hero-section">
    <div id="heroCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel">
        <div class="carousel-indicators">
            {% for banner in banners %}
            <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="{{ forloop.counter0 }}" 
                    {% if forloop.first %}class="active"{% endif %}></button>
            {% endfor %}
        </div>
        <div class="carousel-inner">
            {% for banner in banners %}
            <div class="carousel-item {% if forloop.first %}active{% endif %}">
                <img src="{{ banner.image.url }}" class="d-block w-100" alt="{{ banner.title }}">
                <div class="carousel-caption">
                    <div class="container">
                        <h1 class="display-3 fw-bold animate-fade-up">{{ banner.title }}</h1>
                        {% if banner.subtitle %}
                        <p class="lead mb-4 animate-fade-up-delay">{{ banner.subtitle }}</p>
                        {% endif %}
                        {% if banner.button_text and banner.button_link %}
                        <a href="{{ banner.button_link }}" class="btn btn-primary btn-lg animate-fade-up-delay-2">
                            {{ banner.button_text }}
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="carousel-item active">
                <div class="placeholder-banner">
                    <div class="carousel-caption">
                        <div class="container">
                            <h1 class="display-3 fw-bold">Welcome to Our College</h1>
                            <p class="lead mb-4">Excellence in Education</p>
                            <a href="{% url 'admissions' %}" class="btn btn-primary btn-lg">Apply Now</a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
        </button>
    </div>
</section>

<!-- Welcome Section -->
<section class="welcome-section py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 mb-4 mb-lg-0">
                <h2 class="section-title">Welcome to {% if college_info %}{{ college_info.name }}{% else %}Our College{% endif %}</h2>
                <p class="lead text-muted mb-4">
                    {% if college_info %}{{ college_info.tagline }}{% else %}Building Future Leaders{% endif %}
                </p>
                <p>
                    {% if college_info %}
                    {{ college_info.about|truncatewords:50 }}
                    {% else %}
                    We are committed to providing quality education and shaping the future of our students through excellence in academics, research, and character development.
                    {% endif %}
                </p>
                <a href="{% url 'about' %}" class="btn btn-outline-primary">Learn More About Us</a>
            </div>
            <div class="col-lg-6">
                <div class="welcome-stats">
                    <div class="row text-center">
                        <div class="col-6 mb-3">
                            <div class="stat-card">
                                <i class="bi bi-mortarboard-fill"></i>
                                <h3>5000+</h3>
                                <p>Students</p>
                            </div>
                        </div>
                        <div class="col-6 mb-3">
                            <div class="stat-card">
                                <i class="bi bi-book-fill"></i>
                                <h3>{{ departments.count }}+</h3>
                                <p>Departments</p>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="stat-card">
                                <i class="bi bi-people-fill"></i>
                                <h3>200+</h3>
                                <p>Faculty</p>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="stat-card">
                                <i class="bi bi-trophy-fill"></i>
                                <h3>50+</h3>
                                <p>Achievements</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Courses Section -->
<section class="courses-section py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">Our Departments</h2>
            <p class="text-muted">Explore our diverse range of academic programs</p>
        </div>
        <div class="row">
            {% for dept in departments %}
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="course-card">
                    {% if dept.image %}
                    <img src="{{ dept.image.url }}" alt="{{ dept.name }}">
                    {% else %}
                    <div class="course-placeholder">
                        <i class="bi bi-book"></i>
                    </div>
                    {% endif %}
                    <div class="course-content">
                        <h4>{{ dept.name }}</h4>
                        <p class="text-muted">{{ dept.description|truncatewords:15 }}</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="badge bg-primary">{{ dept.duration }}</span>
                            <a href="{% url 'course_detail' dept.code %}" class="btn btn-sm btn-outline-primary">Learn More</a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="text-center mt-4">
            <a href="{% url 'courses' %}" class="btn btn-primary">View All Courses</a>
        </div>
    </div>
</section>

<!-- Notices Section -->
<section class="notices-section py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">Latest Notices</h2>
            <p class="text-muted">Stay updated with our announcements</p>
        </div>
        <div class="notices-list">
            {% for notice in notices %}
            <div class="notice-item">
                <div class="notice-date">
                    <span class="day">{{ notice.published_date|date:"d" }}</span>
                    <span class="month">{{ notice.published_date|date:"M" }}</span>
                </div>
                <div class="notice-content">
                    <h5>{{ notice.title }} {% if notice.is_important %}<span class="badge bg-danger">Important</span>{% endif %}</h5>
                    <p class="text-muted mb-2">{{ notice.content|truncatewords:20 }}</p>
                    <span class="badge bg-secondary">{{ notice.get_category_display }}</span>
                </div>
            </div>
            {% empty %}
            <p class="text-center text-muted">No notices available at the moment.</p>
            {% endfor %}
        </div>
        <div class="text-center mt-4">
            <a href="{% url 'notices' %}" class="btn btn-outline-primary">View All Notices</a>
        </div>
    </div>
</section>

<!-- Gallery Preview -->
<section class="gallery-preview py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">Campus Gallery</h2>
            <p class="text-muted">A glimpse of our beautiful campus</p>
        </div>
        <div class="row g-3">
            {% for image in gallery_images %}
            <div class="col-lg-4 col-md-6">
                <div class="gallery-item">
                    <img src="{{ image.image.url }}" alt="{{ image.title }}">
                    <div class="gallery-overlay">
                        <h5>{{ image.title }}</h5>
                        <p>{{ image.get_category_display }}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="text-center mt-4">
            <a href="{% url 'gallery' %}" class="btn btn-primary">View Full Gallery</a>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta-section py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <h2 class="text-white mb-3">Ready to Start Your Journey?</h2>
                <p class="text-white-50">Join thousands of successful students and start your educational journey with us today.</p>
            </div>
            <div class="col-lg-4 text-lg-end">
                <a href="{% url 'admissions' %}" class="btn btn-light btn-lg">Apply Now</a>
                <a href="{% url 'contact' %}" class="btn btn-outline-light btn-lg ms-2">Contact Us</a>
            </div>
        </div>
    </div>
</section>
{% endblock %}